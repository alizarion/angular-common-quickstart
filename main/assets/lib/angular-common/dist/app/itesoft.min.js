/*!
 * Copyright 2015 itesoft.
 * http://itesoft.com/
 *
 * Angular-common, v1.0.0
 *Itesoft common Angularjs libs.*/
!function(){var e=angular.module("itesoft",["ngSanitize","ui.bootstrap.tabs","ui.bootstrap.modal","ui.bootstrap.tpls","ngAnimate","matchMedia","ui.grid","ui.grid.pagination","ngRoute","pascalprecht.translate","ui.grid.selection","ui.grid.autoResize","ui.grid.resizeColumns","ui.grid.moveColumns","LocalStorageModule","ngToast"]);e.config(["$compileProvider",function(e){e.directive("itCompile",["$compile",function(e){return function(t,i,n){t.$watch(function(e){return e.$eval(n.itCompile)},function(n){i.html(n),e(i.contents())(t)})}}])}]),e.directive("itModalFullScreen",["$timeout","$window","$document",function(e,t,i){function n(){for(var e=document.getElementsByTagName("*"),i=0,n=0;n<e.length-1;n++){var a=t.getComputedStyle(e[n]),r=parseInt(a["z-index"]);(isNaN(r)?0:r)>i&&(i=r)}return i}var a='<div class="it-modal-full-screen" ng-class="$isModalOpen? $onOpenCss : \'\'"><div class="it-modal-full-screen-header pull-right"><div  ng-if="$isModalOpen"  class="it-modal-full-screen-button "><button class="btn " ng-click="$closeModal()"><div class="it-animated-ciruclar-button"><i class="fa fa-compress"></i></div></button></div><div  ng-if="!$isModalOpen"  class="it-modal-full-screen-button "> <button class="btn pull-right"  ng-click="$openModal()"><div class="it-animated-ciruclar-button"><i class="fa fa-expand"></i></div></button> </div></div><div  class="it-modal-full-screen-content it-fill"  ng-transclude> </div></div>';return{restrict:"EA",transclude:!0,scope:!1,template:a,link:function(a,r,o,s){var l=isNaN(parseInt(o.itZIndex))?null:parseInt(o.itZIndex);a.$onOpenCss=o.itOpenClass?o.itOpenClass:"it-modal-background";var c=isNaN(parseInt(o.itEscapeKey))?27:parseInt(o.itEscapeKey),d=angular.element(r[0].querySelector(".it-modal-full-screen")),p=angular.element(d[0]);a.$openModal=function(){a.$isModalOpen=!0;var i=document.getElementsByTagName("html"),r=t.getComputedStyle(i[0]),o=parseInt(r.top),s=parseInt(r["margin-top"]),c=parseInt(r["padding-top"]),d=(isNaN(parseInt(o))?0:parseInt(o))+(isNaN(parseInt(s))?0:parseInt(s))+(isNaN(parseInt(c))?0:parseInt(c));p.addClass("it-opened"),p.css("top",d+"px"),null!==l?p.css("z-index",l):p.css("z-index",n()+100),e(function(){var e=document.createEvent("Event");e.initEvent("resize",!0,!0),t.dispatchEvent(e)},300)},a.$closeModal=function(){a.$isModalOpen=!1,a.$applyAsync(function(){p.removeAttr("style"),p.removeClass("it-opened"),e(function(){var e=document.createEvent("Event");e.initEvent("resize",!0,!0),t.dispatchEvent(e)},300)})},i.on("keyup",function(e){e&&e.keyCode==c&&a.$closeModal()})}}}]),e.directive("itLazyGrid",["OPERATOR","NOTIFICATION_TYPE","itQueryFactory","itQueryParamFactory","itAmountCleanerService","localStorageService","$rootScope","$log","$q","$templateCache","$timeout",function(e,t,i,n,a,r,o,s,l,c,d){return{restrict:"AE",scope:{options:"="},template:'<div ui-grid="lazyGrid.fields.gridOptions"  ui-grid-selection ui-grid-pagination ui-grid-auto-resize="true" class="it-fill it-sp-lazy-grid"><div class="it-watermark sp-watermark gridWatermark" ng-show="!lazyGrid.fields.gridOptions.data.length"> {{\'GLOBAL.NO_DATA\' |translate}} </div> </div> <!------------------------------------------------------------------------------------------------------------------------------- FILTER --------------------------------------------------------------------------------------------------------------------------------> <script type="text/ng-template" id="dropDownFilter.html"> <div class="ui-grid-filter-container" ng-repeat="colFilter in col.filters"> <it-autocomplete items="colFilter.options.data" selected-option="colFilter.term" input-class="col.headerCellClass" option-container-class="colFilter.class"> </div> </script> <script type="text/ng-template" id="dateRangeFilter.html"> <div class="ui-grid-filter-container"> <span ng-repeat="colFilter in col.filters" class="{{col.headerCellClass}}"> <input type="text" class="form-control {{col.headerCellClass}}_{{colFilter.emptyOption}}" style="width: 75px;display:inline;margin-left: 1px;margin-right: 1px" placeholder="{{colFilter.emptyOption | translate}}" ng-model="colFilter.term" data-min-date="01/01/1980" data-max-date="01/01/2100" data-autoclose="1" name="date2" data-date-format="{{\'GLOBAL.DATE.FORMAT\' | translate}}" bs-datepicker> </span> </div> </script> <script type="text/ng-template" id="stringFilter.html"> <div class="ui-grid-filter-container {{col.headerCellClass}}" ng-repeat="colFilter in col.filters"> <input type="text" class="form-control" ng-model="colFilter.term" pattern="{{colFilter.pattern}}" placeholder="{{colFilter.emptyOption | translate}}"> </div> </script> <!------------------------------------------------------------------------------------------------------------------------------- PAGINATOR --------------------------------------------------------------------------------------------------------------------------------> <script type="text/ng-template" id="paginationTemplate.html"> <div role="contentinfo" class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"> <div role="navigation" class="ui-grid-pager-container"> <div role="menubar" class="ui-grid-pager-control"> <button type="button" role="menuitem" class="ui-grid-pager-first it-sp-grid-pager-first" bs-tooltip title="{{ \'HELP.FIRSTPAGE\' | translate }}" ng-click="pageFirstPageClick()" ng-disabled="cantPageBackward()"> <div class="first-triangle"> <div class="first-bar"> </div> </div> </button> <button type="button" role="menuitem" class="ui-grid-pager-previous it-sp-grid-pager-previous" bs-tooltip title="{{ \'HELP.PREVPAGE\' | translate }}" ng-click="pagePreviousPageClick()" ng-disabled="cantPageBackward()"> <div class="first-triangle prev-triangle"></div> </button> <input type="number" class="ui-grid-pager-control-input it-sp-grid-pager-control-input" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required/> <span class="ui-grid-pager-max-pages-number it-sp-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"> <abbr> / </abbr> {{ paginationApi.getTotalPages() }} </span> <button type="button" role="menuitem" class="ui-grid-pager-next it-sp-grid-pager-next " bs-tooltip title="{{ \'HELP.NEXTPAGE\' | translate }}" ng-click="pageNextPageClick()" ng-disabled="cantPageForward()"> <div class="last-triangle next-triangle"></div> </button> <button type="button" role="menuitem" class="ui-grid-pager-last it-sp-grid-pager-last" bs-tooltip title="{{ \'HELP.FIRSTPAGE\' | translate }}" ng-click="pageLastPageClick()" ng-disabled="cantPageToLast()"> <div class="last-triangle"> <div class="last-bar"> </div> </div> </button> </div> <div class="ui-grid-pager-row-count-picker it-sp-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1"> <select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label"> &nbsp; </span> </div> <span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label it-sp-grid-pager-row-count-label"> {{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}} </span> </div> <div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"> <span class="it-sp-grid-pager-footer-text" ng-show="grid.options.totalItems > 0"> {{\'PAGINATION.INVOICE.FROM\' | translate}} {{showingLow}} <abbr> </abbr> '+"{{'PAGINATION.INVOICE.TO' | translate}} {{showingHigh}} {{'PAGINATION.INVOICE.ON' | translate}} {{grid.options.totalItems}} {{'PAGINATION.INVOICE.TOTAL' | translate}} </span> </div> </div> </div> </script>",controllerAs:"lazyGrid",controller:["$scope",function(t){function o(){s.debug("LazyGrid:Apply External filter"),angular.forEach($.fields.externalFilter,function(e,t){if(!angular.isUndefined(t)&&!angular.isUndefined(e.value)&&!angular.isUndefined(e.condition)){var i=n.create(t,e.value,e.condition);$.fields.filter.push(i)}})}function l(){s.debug("LazyGrid:Apply filter");var t="",i="",r=e.EQUALS;if(angular.isDefined($.fields.gridApi.grid))for(var o=0;o<$.fields.gridApi.grid.columns.length;o++){t=$.fields.gridApi.grid.columns[o].field;for(var l=0;l<$.fields.gridApi.grid.columns[o].filters.length;l++)if(i=$.fields.gridApi.grid.columns[o].filters[l].term,void 0!=i&&""!=i){s.debug("LazyGrid:Filter changed, fieds: "+t+", and value: "+i);var c=$.fields.gridApi.grid.columns[o].filters[l].rsqlKey;void 0!=c&&(t=c),void 0!=$.fields.gridApi.grid.columns[o].filters[l].condition&&(r=$.fields.gridApi.grid.columns[o].filters[l].condition),1==$.fields.gridApi.grid.columns[o].filters[l].amount&&(i=a.cleanAmount(i,y));var d=n.create(t,i,r);$.fields.filter.push(d)}}}function p(){s.debug("LazyGrid:Apply default filter"),angular.isDefined($.fields.gridApi.grid)&&angular.forEach($.fields.gridApi.grid.columns,function(e){angular.isDefined(e)&&angular.isDefined(e.colDef)&&angular.isDefined(e.colDef.filters)&&angular.isDefined(e.colDef.filters[0])&&angular.isDefined(e.colDef.filters[0].defaultTerm)&&(angular.isUndefined(e.field)||angular.isUndefined(e.colDef.filters[0].defaultTerm)||(e.colDef.filters[0].term=e.colDef.filters[0].defaultTerm,s.debug("LazyGrid:Apply default filter: "+e.field+"->"+e.colDef.filters[0].term)))})}function u(){}function g(){}function f(){s.debug("LazyGrid:Filter Changed"),$.fields.filter=[],angular.isDefined($.fields.promise.refresh)&&d.cancel($.fields.promise.refresh),$.fields.promise.refresh=d(function(){$.fn.refresh()},1e3)}function m(e,t){if(s.debug("LazyGrid:Sort Changed"),$.fields.filter=[],0==t.length)$.fields.paginationOptions.sort.name=void 0,$.fields.paginationOptions.sort.direction=void 0;else{var i=t[0].name;angular.isDefined(t[0])&&angular.isDefined(t[0].colDef)&&angular.isDefined(t[0].colDef.sorterRsqlKey)&&(i=t[0].colDef.sorterRsqlKey),$.fields.paginationOptions.sort.name=i,$.fields.paginationOptions.sort.direction=t[0].sort.direction,s.debug("sort changed, sort key: "+t[0].name+", and direction: "+t[0].sort.direction)}$.fn.refresh()}function h(e,t){s.debug("LazyGrid:Pagination Changed"),$.fields.filter=[],($.fields.paginationOptions.pageNumber!=e||$.fields.paginationOptions.pageSize!=t)&&($.fields.paginationOptions.pageNumber=e,$.fields.paginationOptions.pageSize=t,$.fn.refresh())}function v(){s.debug("LazyGrid:Row Selection Changed")}function C(){s.debug("LazyGrid:Refresh"),o(),l();var e=($.fields.paginationOptions.pageNumber-1)*$.fields.paginationOptions.pageSize,t=i.create($.fields.filter,e,$.fields.paginationOptions.pageSize,$.fields.paginationOptions.sort);$.fn.callBack(t)}function b(){s.debug("LazyGrid:Initial load"),l(),$.fields.filter.length<=0&&p(),$.fields.filter=[],$.fn.refresh()}function S(e){return angular.isUndefined(e.key)?void s.error("External filter object must have key"):angular.isUndefined(e.condition)?void s.error("External filter object must have condition"):void(angular.isUndefined(e.value)?$.fields.externalFilter[e.key]={}:$.fields.externalFilter[e.key]=e)}function w(){}var y=r.get("Locale"),$=this;$.options=t.options,$.fields={template:{pagination:c.get("paginationTemplate.html")},filter:[],externalFilter:{},gridApi:{},gridOptions:{},paginationOptions:{},appScope:{},promise:{refresh:{}}},$.on={loaded:u,ready:g,filterChange:f,sortChange:m,paginationChanged:h,rowSelectionChanged:v},$.fn={callBack:$.options.callBack,initialize:w,refresh:C,initialLoad:b,addExternalFilter:S},$.fields.paginationOptions={pageNumber:1,pageSize:10,sort:{name:void 0,direction:void 0}},$.fields.gridOptions={enableFiltering:!0,enableSorting:!0,enableColumnMenus:!1,useExternalPagination:!0,useExternalSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,multiSelect:!1,modifierKeysToMultiSelect:!1,noUnselect:!0,useExternalFiltering:!0,data:[],columnDefs:[],paginationTemplate:$.fields.template.pagination,onRegisterApi:function(e){e.core.on.filterChanged($.appScope,$.on.filterChange),e.core.on.sortChanged($.appScope,$.on.sortChange),e.pagination.on.paginationChanged($.appScope,$.on.paginationChanged),e.selection.on.rowSelectionChanged($.appScope,$.on.rowSelectionChanged),$.fields.gridApi=e,s.debug("LazyGrid:UI-grid:onRegisterApi")}},angular.isDefined($.options.onRegisterApi)&&($.options.onRegisterApi($),s.debug("LazyGrid:onRegisterApi"))}]}}]).constant("OPERATOR",{EQUALS:"==",LIKE:"==%",NOT_EQUALS:"!=",LESS_THAN:"=lt=",LESS_EQUALS:"=le=",GREATER_THAN:"=gt=",GREATER_EQUALS:"=ge="}).constant("NOTIFICATION_TYPE",{INFO:"INFO",WARNING:"WARNING",ERROR:"ERROR",SUCCESS:"SUCCESS",DISMISS:"DISMISS"}),e.directive("itBusyIndicator",["$timeout","$http",function(e,t){function i(i,a,r){i.$watch(function(){return t.pendingRequests.length>0},function(t){n&&e.cancel(n),t===!0?n=e(function(){i.hasPendingRequests=!0},250):i.hasPendingRequests=!1})}var n;return{link:i,restrict:"AE",transclude:!0,scope:{isBusy:"="},template:'<div class="mask-loading-container" ng-show="hasPendingRequests"></div><div class="main-loading-container" ng-show="hasPendingRequests || isBusy"><i class="fa fa-circle-o-notch fa-spin fa-4x text-primary "></i></div><ng-transclude ng-show="!isBusy" class="it-fill"></ng-transclude>'}}]),e.directive("itLoader",["$http","$rootScope",function(e,t){return{restrict:"EA",scope:!0,template:'<span class="fa-stack"><i class="fa fa-refresh fa-stack-1x" ng-class="{\'fa-spin\':$isLoading}"></i></span>',link:function(t){t.$watch(function(){e.pendingRequests.length>0?t.$applyAsync(function(){t.$isLoading=!0}):t.$applyAsync(function(){t.$isLoading=!1})})}}}]),e.directive("itDetail",[function(){return{restrict:"EA",require:"^itMasterDetail",transclude:!0,scope:!1,template:' <div ng-show="($parent.$parent.desktop || ($parent.$parent.activeState == \'detail\' &&$parent.$parent.mobile))"   ng-if="currentItemWrapper.currentItem"  class="it-master-detail-slide-left col-md-{{$masterCol ? (12-$masterCol) : 6}} it-fill" > <div class="it-fill" ng-transclude></div></div><div  ng-show="($parent.$parent.desktop || ($parent.$parent.activeState == \'detail\' &&$parent.$parent.mobile))" class="col-md-{{$masterCol ? (12-$masterCol) : 6}} it-fill" ng-if="!currentItemWrapper.currentItem"><div class="it-watermark" >{{$itNoDetail}}</div></div>'}}]),e.directive("itDetailContent",function(){return{restrict:"EA",require:"^itDetail",transclude:!0,scope:!1,template:'<div class="row it-fill"> <div class="col-md-12  it-fill" ng-transclude></div></div>'}}),e.directive("itDetailHeader",function(){return{restrict:"EA",require:"^itDetail",scope:!1,transclude:!0,template:'<div class="fluid-container"><div class="row it-md-header"><div class="col-md-2 it-fill  col-xs-2"><a href="" ng-if="$parent.$parent.$parent.mobile" ng-click="$parent.$parent.$parent.$parent.goToMaster()" class="it-material-design-hamburger__icon pull-left it-fill "> <span  class="menu-animated it-material-design-hamburger__layer " ng-class="{\'it-material-design-hamburger__icon--to-arrow\':$parent.$parent.$parent.$parent.mobile}"> </span> </a></div><div class="col-md-10 col-xs-10 it-fill "><div class="btn-toolbar  it-fill pull-right " ng-transclude></div></div></div></div>'}}),e.directive("itMaster",function(){return{restrict:"EA",require:"^itMasterDetail",priority:-1,transclude:!0,scope:{itMasterData:"=",itLang:"=",itCol:"=",itMasterDetailControl:"=",itLockOnChange:"=",itNoDataMsg:"@",itNoDetailMsg:"@"},template:'<div  ng-show="($parent.$parent.activeState == \'master\')" class=" it-master it-master-detail-slide-right col-md-{{itCol ? itCol : 6}} it-fill " ui-i18n="{{itLang}}"><div class="row" ng-transclude></div><div class="row it-master-grid it-fill" ><div class="col-md-12 it-fill"><div ui-grid="gridOptions" ui-grid-selection ui-grid-resize-columns  ui-grid-move-columns  ui-grid-auto-resize class="it-master-detail-grid it-fill "><div class="it-watermark" ng-show="!gridOptions.data.length" >{{itNoDataMsg}}</div></div></div></div></div>',controller:["$scope","$filter","$q","$timeout","itPopup","$templateCache","$route","$window",function(e,t,i,n,a,r,o,s){function l(t){var i=this;angular.forEach(e.itMasterData,function(e,n){angular.equals(e,t)&&(i.index=n)}),i.originalItem=t,i.currentItem=angular.copy(t),i.hasChanged=!1,i.isWatched=!1,i.unlockOnEquals=!0}function c(t){e.itMasterDetailControl.disableMultiSelect||(e.gridApi.selection.getSelectedRows().length>1?e.$parent.currentItemWrapper=null:1===e.gridApi.selection.getSelectedRows().length?(d(e.gridApi.selection.getSelectedRows()[0]),p(e.gridApi.selection.getSelectedRows()[0])):0===e.gridApi.selection.getSelectedRows().length&&(e.$parent.currentItemWrapper=null))}function d(t){var n=i.defer();return null!=e.$parent.currentItemWrapper&&e.$parent.currentItemWrapper.hasChanged&&e.itLockOnChange?(n.reject("undo or save before change"),n.promise):(e.$parent.currentItemWrapper=new l(t),n.resolve(""),n.promise)}function p(t){e.gridApi.core.scrollTo(t)}function u(){e.$applyAsync(function(){null!==e.$parent.currentItemWrapper&&(e.$parent.currentItemWrapper.hasChanged=!1,e.$parent.currentItemWrapper.isWatched=!1)})}function g(t){null!=e.$parent.currentItemWrapper&&e.$parent.currentItemWrapper.hasChanged&&e.itLockOnChange&&(a.alert(e.itMasterDetailControl.navAlert),t.preventDefault())}r.put("ui-grid/selectionRowHeaderButtons",'<div class="it-master-detail-row-select" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ><input type="checkbox" ng-disabled="grid.appScope.$parent.currentItemWrapper.hasChanged && grid.appScope.itLockOnChange " tabindex="-1"  ng-checked="row.isSelected"></div>'),r.put("ui-grid/selectionSelectAllButtons",'<div class="it-master-detail-select-all-header" ng-click="(grid.appScope.$parent.currentItemWrapper.hasChanged && grid.appScope.itLockOnChange  )? \'return false\':headerButtonClick($event)"><input type="checkbox"  ng-change="headerButtonClick($event)" ng-disabled="grid.appScope.$parent.currentItemWrapper.hasChanged  && grid.appScope.itLockOnChange" ng-model="grid.selection.selectAll"></div>'),e.$parent.$masterCol=e.itCol,l.prototype.unlockCurrent=function(){this.hasChanged=!1,this.isWatched=!1},l.prototype.lockCurrent=function(e){this.hasChanged=!0,this.isWatched=!0,this.unlockOnEquals=!e},e.$parent.currentItemWrapper=null,e.$parent.$itNoDetail=e.itNoDetailMsg,e.gridOptions={rowHeight:40,data:e.itMasterData,multiSelect:!e.itMasterDetailControl.disableMultiSelect,enableSelectAll:!e.itMasterDetailControl.disableMultiSelect,enableRowHeaderSelection:!e.itMasterDetailControl.disableMultiSelect,showGridFooter:!0,enableMinHeightCheck:!0,enableColumnResizing:!0,enableHorizontalScrollbar:0,enableVerticalScrollbar:2,onRegisterApi:function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(e){c(e)}),t.selection.on.rowSelectionChangedBatch(e,function(e){c(e)})},gridFooterTemplate:'<div class="ui-grid-footer-info ui-grid-grid-footer"> <span class="ngLabel badge ">{{"search.totalItems" |t}}  {{grid.appScope.itMasterData.length}}</span> <span ng-show="grid.appScope.filterText.length > 0 && grid.appScope.itMasterData.length != grid.renderContainers.body.visibleRowCache.length" class="ngLabel badge alert-info ">{{"search.showingItems" |t}}  {{grid.renderContainers.body.visibleRowCache.length}}</span> <span ng-show="!grid.appScope.itMasterDetailControl.disableMultiSelect" class="ngLabel badge">{{"search.selectedItems" | t}} {{grid.appScope.gridApi.selection.getSelectedRows().length}}</span></div>',rowTemplate:'<div ng-click="grid.appScope.onRowClick(col,row)" ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.uid" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }"  ui-grid-cell></div>'},"undefined"!=typeof e.itMasterDetailControl.columnDefs&&angular.forEach(e.itMasterDetailControl.columnDefs,function(e){e.headerCellTemplate='<div ng-class="{ \'sortable\': sortable }"> <!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --> <div class="ui-grid-cell-contents" col-index="renderIndex" title="TOOLTIP"> <span>{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-visible="col.sort.direction" ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }"> &nbsp; </span> </div> <div class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}"> <i class="fa fa-align-justify"></i> </div> <div ui-grid-filter></div> </div>'},!0),e.gridOptions.columnDefs=e.itMasterDetailControl.columnDefs,e.onRowClick=function(t,i){void 0!=i.entity&&"undefined"!=typeof t.providedHeaderCellTemplate&&d(i.entity).then(function(n){"ui-grid/selectionHeaderCell"!==t.providedHeaderCellTemplate&&(e.gridApi.selection.clearSelectedRows(),e.$parent.$parent.mobile&&e.$parent.$parent.goToDetail()),e.gridApi.selection.toggleRowSelection(i.entity)},function(t){a.alert(e.itMasterDetailControl.navAlert),e.gridApi.selection.selectRow(e.$parent.currentItemWrapper.originalItem)})},e.itMasterDetailControl.selectItem=function(t){e.onRowClick(null,{entity:t})},e.refreshData=function(){var i=t("itUIGridGlobalFilter")(e.gridOptions.data,e.gridOptions,e.filterText);angular.forEach(e.gridApi.grid.rows,function(t){var n=!1;i.forEach(function(e){angular.equals(t.entity,e)&&(n=!0)}),n?e.gridApi.core.clearRowInvisible(t):e.gridApi.core.setRowInvisible(t)})},e.itMasterDetailControl.getCurrentItem=function(){return e.$parent.currentItemWrapper.currentItem},e.itMasterDetailControl.undoChangeCurrentItem=function(){null!=e.$parent.currentItemWrapper&&(d(e.$parent.currentItemWrapper.originalItem),e.$parent.currentItemWrapper.currentItem=angular.copy(e.$parent.currentItemWrapper.originalItem),u())},e.$on("unlockCurrentItem",function(){u()}),e.itMasterDetailControl.scrollToItem=function(e){p(e)},e.itMasterDetailControl.getSelectedItems=function(){return"undefined"!=typeof e.gridApi&&"function"==typeof e.gridApi.selection.getSelectedRows?e.gridApi.selection.getSelectedRows():[]},e.itMasterDetailControl.getCurrentItem=function(){return e.$parent.currentItemWrapper.currentItem},e.itMasterDetailControl.getCurrentItemWrapper=function(){return e.$parent.currentItemWrapper},e.itMasterDetailControl.getFilteredItems=function(){var t=e.gridApi.core.getVisibleRows(e.gridApi.grid),i=[];return angular.forEach(t,function(e){i.push(e.entity)}),i},e.itMasterDetailControl.setCurrentItem=function(t){var a=i.defer();return e.gridApi.selection.clearSelectedRows(),d(t).then(function(){n(function(){var i=e.itMasterData.indexOf(t);i>=0?(e.gridApi.selection.selectRow(t),p(t),e.$parent.$parent.mobile&&e.$parent.$parent.goToDetail(),a.resolve()):a.reject()})},function(){a.reject()}),a.promise},e.itMasterDetailControl.undoChangeCurrentItem=function(){null!=e.$parent.currentItemWrapper&&(d(e.$parent.currentItemWrapper.originalItem),e.$parent.currentItemWrapper.currentItem=angular.copy(e.$parent.currentItemWrapper.originalItem),e.$parent.currentItemWrapper.unlockCurrent())},e.itMasterDetailControl.fillHeight=function(){},e.$on("unlockCurrentItem",function(){n(function(){e.$parent.currentItemWrapper.unlockCurrent()})}),e.$on("lockCurrentItem",function(t){n(function(){e.$parent.currentItemWrapper.lockCurrent(t)})}),e.itAppScope=e.$parent,e.itAppScope.$navAlert=e.itMasterDetailControl.navAlert;var f=angular.element(s);f.bind("resize",function(){e.gridApi.core.handleWindowResize()}),e.itMasterDetailControl.initState=!0,e.$on("$locationChangeStart",g),e.itMasterDetailControl=angular.extend({navAlert:{text:"Please save or revert your pending change",title:"Unsaved changes",buttons:[{text:"OK",type:"btn-info",onTap:function(){return!1}}]}},e.itMasterDetailControl),e.$watch("itLang",function(){e.gridApi.grid.refresh()}),e.$watch("itMasterData",function(){e.gridOptions.data=[],e.itMasterData.forEach(function(t){e.gridOptions.data.push(t)}),"undefined"==typeof e.itMasterData||null===e.itMasterData?e.$parent.currentItemWrapper=null:0===e.itMasterData.length&&(e.$parent.currentItemWrapper=null),e.gridApi.grid.refresh(),null!==e.itMasterDetailControl&&"undefined"!=typeof e.itMasterDetailControl.getCurrentItemWrapper()&&null!=e.itMasterDetailControl.getCurrentItemWrapper()&&e.$applyAsync(function(){p(e.itMasterDetailControl.getCurrentItemWrapper().originalItem)}),e.refreshData()},!0),n(function(){var e=document.createEvent("Event");e.initEvent("resize",!0,!0),s.dispatchEvent(e)},250),e.$watch("$parent.currentItemWrapper.currentItem",function(t,i){null!=e.$parent.currentItemWrapper&&(e.$parent.currentItemWrapper.isWatched||(e.$parent.currentItemWrapper.isWatched=!0),e.$parent.currentItemWrapper.unlockOnEquals?e.$parent.currentItemWrapper.hasChanged=!angular.equals(t,e.$parent.currentItemWrapper.originalItem):e.$parent.currentItemWrapper.hasChanged=!0)},!0),e.$watch("filterText",function(){e.refreshData()},!0),e.$watch("itNoDetailMsg",function(){e.$parent.$itNoDetail=e.itNoDetailMsg})}]}}).filter("itUIGridGlobalFilter",["$rootScope",function(e){return function(t,i,n){function a(e,t){var i,n=t.split("."),a=e;for(i=0;i<n.length;++i){if(void 0==a[n[i]])return void 0;a=a[n[i]]}return a}var r=[];if(void 0===n||""===n)return t;n=n.toLowerCase();for(var o=e.$new(!0),s=0;s<t.length;s++)for(var l=0;l<i.columnDefs.length;l++){var c=t[s],d=i.columnDefs[l].field,p=a(c,d);if(i.columnDefs[l].cellFilter&&(o.value=p,p=o.$eval("value | "+i.columnDefs[l].cellFilter)),"undefined"!=typeof p&&null!=p&&p.toString().toLowerCase().indexOf(n)>-1){r.push(c);break}}return o.$destroy(),r}}]),e.directive("itMasterDetail",["itPopup","$timeout","$window",function(e,t,i){return{restrict:"EA",transclude:!0,scope:!0,template:'<div it-bottom-glue="" class="it-master-detail-container jumbotron "> <div class="it-fill row " ng-transclude></div></div>',controller:["$scope","screenSize",function(n,a){n.activeState="master",n.desktop=a.on("md, lg",function(e){n.desktop=e}),n.mobile=a.on("xs, sm",function(e){n.mobile=e}),n.goToDetail=function(){n.activeState="detail"},n.$watch("mobile",function(){n.mobile&&"undefined"!=typeof n.$$childHead.currentItemWrapper&&null!=n.$$childHead.currentItemWrapper?n.activeState="detail":n.activeState="master"}),n.$watch("$$childHead.currentItemWrapper",function(){!n.mobile||"undefined"!=typeof n.$$childHead.currentItemWrapper&&null!==n.$$childHead.currentItemWrapper?!n.mobile||"undefined"!=typeof n.$$childHead.currentItemWrapper.currentItem&&null!==n.$$childHead.currentItemWrapper.currentItem||(n.activeState="master"):n.activeState="master"}),n.goToMaster=function(){n.mobile&&"undefined"!=typeof n.$$childHead.currentItemWrapper&&null!=n.$$childHead.currentItemWrapper&&n.$$childHead.currentItemWrapper.hasChanged&&n.$$childHead.$$childHead.itLockOnChange?e.alert(n.$$childHead.$navAlert):(n.activeState="master",t(function(){i.dispatchEvent(new Event("resize"))},300))}}]}}]),e.directive("itMasterHeader",function(){return{restrict:"EA",require:"^itMaster",scope:!1,transclude:!0,template:'<div class="fuild-container">   <div class="row it-fill">   <div class="it-md-header col-xs-12 col-md-12"><div class="btn-toolbar it-fill" ng-transclude></div></div><div class="col-xs-12 col-md-12 pull-right"><div><form><div class="form-group has-feedback it-master-header-search-group  col-xs-12 col-md-{{$parent.itCol < 4 ? 12 :6 }} pull-right" ><span class="glyphicon glyphicon-search form-control-feedback"></span><input  class="form-control " type="text" ng-model="$parent.filterText" class="form-control floating-label"  placeholder="{{attrs.itSearchPlaceholder}}"/></div></form></div></div></div></div>',link:function(e,t,i){e.$watch(function(){return i.itSearchPlaceholder},function(t){e.placeholderText=t})}}}),e.directive("konami",["$document","$uibModal",function(e,t){return{restrict:"A",template:'<style type="text/css"> @-webkit-keyframes easterEggSpinner { from { -webkit-transform: rotateY(0deg); } to { -webkit-transform: rotateY(-360deg); } } @keyframes easterEggSpinner { from { -moz-transform: rotateY(0deg); -ms-transform: rotateY(0deg); transform: rotateY(0deg); } to { -moz-transform: rotateY(-360deg); -ms-transform: rotateY(-360deg); transform: rotateY(-360deg); } } .easterEgg { -webkit-animation-name: easterEggSpinner; -webkit-animation-timing-function: linear; -webkit-animation-iteration-count: infinite; -webkit-animation-duration: 6s; animation-name: easterEggSpinner; animation-timing-function: linear; animation-iteration-count: infinite; animation-duration: 6s; -webkit-transform-style: preserve-3d; -moz-transform-style: preserve-3d; -ms-transform-style: preserve-3d; transform-style: preserve-3d; } .easterEgg img { position: absolute; border: 1px solid #ccc; background: rgba(255,255,255,0.8); box-shadow: inset 0 0 20px rgba(0,0,0,0.2); } </style>',link:function(i){var n=[38,38,40,40,37,39,37,39,66,65],a=0,r=function(o){if(o.keyCode===n[a++]){if(a===n.length){e.off("keydown",r);var s=t.open({template:'<div style="max-width: 100%;" class="easterEgg"> <img style="-webkit-transform: rotateY(0deg) translateX(180px); padding: 0 0 0 0px;" src="http://media1.woopic.com/493/f/470x264/q/85/fd/p/newsweb-finance-article%7Cc8c%7C177%7Cbe13e9df471d6c4469b3e3ac93/itesoft-la-sf2i-monte-a-9-9-des-parts%7Cl_itesoftlogo.png" width="100%" height="160" alt=""> <img style="-webkit-transform: rotateY(-72deg) translateX(180px); padding: 0 0 0 0px;" src="http://media1.woopic.com/493/f/470x264/q/85/fd/p/newsweb-finance-article%7Cc8c%7C177%7Cbe13e9df471d6c4469b3e3ac93/itesoft-la-sf2i-monte-a-9-9-des-parts%7Cl_itesoftlogo.png" width="100%" height="160" alt=""> <img style="-webkit-transform: rotateY(-144deg) translateX(180px); padding: 0 0 0 0px;" src="http://media1.woopic.com/493/f/470x264/q/85/fd/p/newsweb-finance-article%7Cc8c%7C177%7Cbe13e9df471d6c4469b3e3ac93/itesoft-la-sf2i-monte-a-9-9-des-parts%7Cl_itesoftlogo.png" width="100%" height="160" alt=""> <img style="-webkit-transform: rotateY(-216deg) translateX(180px); padding: 0 0 0 0px;" src="http://media1.woopic.com/493/f/470x264/q/85/fd/p/newsweb-finance-article%7Cc8c%7C177%7Cbe13e9df471d6c4469b3e3ac93/itesoft-la-sf2i-monte-a-9-9-des-parts%7Cl_itesoftlogo.png" width="100%" height="160" alt=""> <img style="-webkit-transform: rotateY(-288deg) translateX(180px); padding: 0 0 0 0px;" src="http://media1.woopic.com/493/f/470x264/q/85/fd/p/newsweb-finance-article%7Cc8c%7C177%7Cbe13e9df471d6c4469b3e3ac93/itesoft-la-sf2i-monte-a-9-9-des-parts%7Cl_itesoftlogo.png" width="100%" height="160" alt=""> </div>',size:"lg"});i.cancel=function(){s.dismiss("cancel")}}}else a=0};e.on("keydown",r),i.$on("$destroy",function(){e.off("keydown",r)})}}}]),e.directive("itAutocomplete",function(){return{restrict:"AE",scope:{items:"=",selectedOption:"=",inputClass:"=",optionClass:"=",optionContainerClass:"=",searchMode:"=",placeholder:"="},controllerAs:"itAutocompleteCtrl",controller:["$scope","$rootScope","$translate","$document","$timeout","$log",function(e,t,i,n,a,r){function o(e){r.debug("itAutocomplete: select with  id "+e);var t=!1;C.fields.selectedItem={},angular.isDefined(e)&&(angular.forEach(C.fields.items,function(i){i.id==e&&(c(i),t=!0)}),t||l())}function s(){r.debug("itAutocomplete: copy option items"),angular.copy(e.items,C.fields.items),l()}function l(){var e=0;angular.forEach(C.fields.items,function(t){angular.isDefined(C.fields.selectedItem)&&(C.fields.selectedItem!=t?d(t):c(t)),t.position=e,e++})}function c(t){if(r.debug("itAutocomplete: select "+t.id),angular.isDefined(C.fields.selectedItem)&&d(C.fields.selectedItem),angular.isDefined(t)){e.focusIndex=t.position,C.fields.selectedItem=t,e.selectedOption=t.id,C.fields.selectedItem["class"]=C.fields.selectedSelectClass;var i=n[0].querySelector("#options_"+t.id);p(i)}}function d(e){e["class"]=C.fields.defaultSelectClass}function p(e){var t=n[0].querySelector("#"+C.fields.optionContainerId);if(angular.isDefined(e)&&null!=e&&angular.isDefined(e.getBoundingClientRect())&&angular.isDefined(t)&&null!=t){
var i=e.getBoundingClientRect().top+e.getBoundingClientRect().height+t.scrollTop,a=t.getBoundingClientRect().top+t.getBoundingClientRect().height,r=i-a;t.scrollTop=r}}function u(t){angular.isUndefined(t)?(C.fields.showItems=!1,C.fields.inputSearch=C.fields.selectedItem.value):document.activeElement.parentElement.firstElementChild.classList.contains(C.fields.inputClass)?e.$applyAsync(function(){t.srcElement.focus()}):(C.fields.showItems=!1,C.fields.inputSearch=C.fields.selectedItem.value)}function g(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var t=navigator.userAgent,i=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}return e}function f(e){if(angular.isDefined(e)&&-1!=g()){var t=e.srcElement.parentElement.children[1],i=angular.element(e.srcElement.parentElement)[0];if(angular.isDefined(t)&&angular.isDefined(i)&&"fixed"==t.currentStyle.position){var n=i.getBoundingClientRect().top+i.getBoundingClientRect().height;t.style.setProperty("top",n+"px")}}C.fields.showItems=!0}function m(){if(r.debug("itAutocomplete: input search change value"),C.fields.items=[],""==C.fields.inputSearch)s();else{var t=0;angular.forEach(e.items,function(e){"startsWith"==C.fields.searchMode?e.value.toLowerCase().startsWith(C.fields.inputSearch.toLowerCase())&&(C.fields.items.push(e),C.fields.items[t].position=t,t++):-1!=e.value.toLowerCase().search(C.fields.inputSearch.toLowerCase())&&(C.fields.items.push(e),C.fields.items[t].position=t,t++)})}1==C.fields.items.length&&c(C.fields.items[0]),f()}function h(t){var i=t.keyCode;e.keys.forEach(function(e){e.code===i&&e.action()})}function v(){var e=(new Date).getTime(),t="option_container_xxxxxxxxxxxx4yxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)});return t}var C=this;C.fields={items:[],inputSearch:"",showItems:!1,optionClass:e.optionClass,optionContainerClass:e.optionContainerClass,inputClass:e.inputClass,defaultSelectClass:"",selectedSelectClass:"",selectedItem:{},searchMode:e.searchMode,placeholder:e.placeholder},angular.isUndefined(C.fields.optionClass)&&(C.fields.optionClass=""),angular.isUndefined(C.fields.optionContainerClass)&&(C.fields.optionContainerClass=""),angular.isUndefined(C.fields.inputClass)&&(C.fields.inputClass="it-autocomplete-input-class"),angular.isUndefined(C.fields.placeholder)&&(C.fields.placeholder=""),C.fields.optionContainerClass=C.fields.optionContainerClass+" it-autocomplete-container",C.fields.defaultSelectClass=C.fields.optionClass+" it-autocomplete-select",C.fields.selectedSelectClass=C.fields.defaultSelectClass+" it-autocomplete-selected",C.fields.optionContainerId=v(),C.fn={select:c,change:m,init:l,fullInit:s,hideItems:u,showItems:f,keyBoardInteration:h},s(),e.focusIndex=-1,o(e.selectedOption),e.$watch("items",function(t,i){r.debug("itAutocomplete: items value changed"),s(),o(e.selectedOption),u()}),e.$watch("selectedOption",function(e,t){r.debug("itAutocomplete: selectedOption value changed"),(angular.isUndefined(C.fields.selectedItem)||e!=C.fields.selectedItem.id)&&(o(e),u())}),e.$watch("focusIndex",function(t,i){r.debug("itAutocomplete: focusIndex value changed"),t!=i&&(0>t?e.focusIndex=-1:t>=C.fields.items.length&&(e.focusIndex=C.fields.items.length-1),angular.isDefined(C.fields.items)&&c(C.fields.items[e.focusIndex]))}),e.keys=[];const b=13,S=38,w=40;e.keys.push({code:b,action:function(){C.fields.showItems?u():(f(),""==C.fields.inputSearch&&(e.focusIndex=-1))}}),e.keys.push({code:S,action:function(){f(),e.focusIndex--}}),e.keys.push({code:w,action:function(){f(),e.focusIndex++}})}],template:'<div class="col-xs-12 it-autocomplete-div"><input placeholder="{{itAutocompleteCtrl.fields.placeholder}}" ng-keydown="itAutocompleteCtrl.fn.keyBoardInteration($event)" ng-focus="itAutocompleteCtrl.fn.showItems($event)" ng-blur="itAutocompleteCtrl.fn.hideItems($event)" type="text" class="form-control" ng-class="inputClass" ng-change="itAutocompleteCtrl.fn.change()" ng-model="itAutocompleteCtrl.fields.inputSearch"> <div  ng-class="itAutocompleteCtrl.fields.optionContainerClass" id="{{itAutocompleteCtrl.fields.optionContainerId}}" ng-show="itAutocompleteCtrl.fields.showItems" ><div class="it-autocomplete-content"  ng-repeat="item in itAutocompleteCtrl.fields.items"><div ng-class="item.class" id="options_{{item.id}}"  ng-mousedown="itAutocompleteCtrl.fn.select(item)">{{item.value | translate}}</div></div></div></div>'}}),e.directive("itCheckbox",function(){return{restrict:"A",transclude:!0,replace:!0,link:function(e,t,i){var n=angular.element(t[0]);n.wrap('<div class="checkbox"></div>'),n.wrap("<label></label>"),n.after('<span class="checkbox-material"><span class="check" style="margin-right:16px;width: '+i.width+";height:"+i.height+';"></span></span>&nbsp;'+(i.itLabel||""))}}}),e.directive("itInput",function(){return{restrict:"A",replace:!0,require:"?ngModel",link:function(e,t,i,n){if(n){var a=angular.element(t[0]);if(a.hasClass("floating-label")){a.wrap('<div class="form-control-wrapper"></div>');var r=a.attr("placeholder");r?a.after('<div class="floating-label">'+r+"</div"):(a.after('<div class="floating-label">'+e.itLabel+"</div"),e.$watch("itLabel",function(t){e.$applyAsync(function(){if(a[0].offsetParent){var e=a[0].offsetParent.children;angular.forEach(e,function(e){var i=angular.element(e);i.hasClass("floating-label")&&i.text(t)})}})})),a.after('<span class="material-input"></span>'),a.attr("placeholder","").removeClass("floating-label")}a.after('<small class="text-danger" style="display:none;"></small>'),e.$watch("itError",function(e){if(a[0].offsetParent){var t=a[0].offsetParent.children;angular.forEach(t,function(t){var i=angular.element(t);i.hasClass("text-danger")&&(i.text(e),""!=e&&void 0!=e?(i.removeClass("ng-hide"),i.addClass("ng-show"),i.css("display","block")):(i.removeClass("ng-show"),i.addClass("ng-hide"),i.css("display","none")))})}}),(null===a.val()||"undefined"==a.val()||""===a.val())&&a.addClass("empty"),e.$watch(function(){return n.$modelValue},function(e,t){null===e||void 0==e||""===e?a.addClass("empty"):a.removeClass("empty")}),a.on("change",function(){null===a.val()||"undefined"==a.val()||""===a.val()?a.addClass("empty"):a.removeClass("empty")})}},scope:{itError:"=",itLabel:"@"}}}),e.directive("itSearch",function(){return{restrict:"A",replace:!0,scope:{itSearchControl:"="},link:function(e,t,i){var n=angular.element(t[0]);n.after('<span class="glyphicon glyphicon-search form-control-feedback"/>')},controller:["$scope",function(e){e.itSearchControl.multicolumnsFilter=function(t){var i=new RegExp(e.itSearchControl.filterText,"i"),n=[],a=!1;return e.itSearchControl.columnDefs&&t.forEach(function(t){var r=!1;t.entity?(e.itSearchControl.columnDefs.forEach(function(n){if(!r&&t.entity[n.field]){var a=t.entity[n.field].toString();n.cellFilter&&(e.value=a,a=e.$eval("value | "+n.cellFilter)),"undefined"!=typeof a&&null!=a&&a.match(i)&&(r=!0)}}),r||(t.visible=!1)):(a=!0,e.itSearchControl.columnDefs.forEach(function(e){!r&&t[e.field]&&t[e.field].toString().match(i)&&(r=!0)}),r&&n.push(t))}),a&&(t=n),t}}]}}),e.directive("itToggle",["$compile",function(e){return{restrict:"A",transclude:!0,link:function(e,t,i){var n=angular.element(t[0]);n.wrap('<div class="togglebutton"></div>'),void 0==e.itLabel?(n.wrap("<label></label>"),n.after('<span class="toggle"></span>')):(n.wrap("<label></label>"),n.after('<span class="toggle"></span><span>'+(e.itLabel||"")+"</span>"),e.$watch("itLabel",function(e){if(e&&n.context){var t=angular.element(n.context.parentNode);if(t&&i.itLabel){var a=angular.element(t.get(0).firstChild);a.get(0).textContent=e+"  "}}}))},scope:{itLabel:"@"}}}]),e.directive("itPrettyprint",["$rootScope","$sanitize",function(e,t){return{restrict:"EA",terminal:!0,compile:function(e,t){return t["class"]?t["class"]&&-1==t["class"].split(" ").indexOf("prettyprint")&&t.$set("class",t["class"]+" prettyprint"):t.$set("class","prettyprint"),function(e,t,i){function n(e){return String(e).replace(/[&<>"'\/]/g,function(e){return a[e]})}var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};t[0].innerHTML=prettyPrintOne(n(t[0].innerHTML))}}}}]),e.directive("itBottomGlue",["$window","$timeout",function(e,t){return function(i,n){function a(){for(var t=n[0],i=angular.element(n)[0],a=0,r=0,o=0,s=0;null!==t&&"undefined"!=typeof t;){var l=e.getComputedStyle(t),c=parseInt(l["margin-bottom"],10),d=parseInt(l["padding-bottom"],10),p=parseInt(l["padding-top"],10),u=parseInt(l["margin-top"],10);s+=isNaN(u)?0:u,a+=isNaN(c)?0:c,r+=isNaN(d)?0:d,o+=isNaN(p)?0:p,t=t.parentElement}var g=e.getComputedStyle(n[0]),f=parseInt(g["padding-bottom"],10),m=i.getBoundingClientRect();n.css("height",e.innerHeight-m.top-a-(r-f)+"px"),n.css("overflow-y","auto")}t(function(){a(),e.addEventListener("resize",function(){a()})},250)}}]),e.directive("itSidePanel",["$window",function(e){function t(e,t,i){e.itSidePanelElement=t,e.setIconClass(e,i),e.setZIndexes(t,i),e.setColMd(i),e.setHeightMode(i),e.setTopPosition(i)}return{link:t,restrict:"E",transclude:!0,controller:"$sidePanelCtrl",scope:!0,template:'<div class="it-side-panel-container" ng-class="{\'it-side-panel-container-show\': showPanel}"><div class="it-side-panel-button it-vertical-text" ng-class="{\'it-side-panel-button-show\':showPanel,\'it-side-panel-button-right\':!showPanel}" ng-click="toggleSidePanel()"><span class="fa {{itIconClass}}"></span></div><div class="it-side-panel" ng-transclude></div></div>'}}]),e.directive("itSidePanelContent",function(){function e(e){}return{scope:!1,link:e,restrict:"E",transclude:!0,require:"^itSidePanel",template:'<div class="it-side-panel-content" ng-transclude></div>'}}),e.controller("$sidePanelCtrl",["$scope","$window","$document","$timeout","$log",function(e,t,i,n,a){var r="it-col",o="it-height-mode",s="it-top-position",l=40,c="z-index",d="window",p="full",u="auto",g=[d,p,u],f=d,m=4,h=12,v=1,C="fa-search",b="none",S=b,w=".it-side-panel-button",y=".it-side-panel-button-right",$=".it-side-panel-container",I=".it-side-panel",E=".it-side-panel-header",x=".it-side-panel-content",A=".it-side-panel-footer",k=this;k.scope=e,k.scope.showPanel=!1,k.scope.itHeightMode=f,k.scope.itSidePanelcolMd=m,k.scope.itSidePanelTopPosition=b,k.scope.sidePanelButtonWidth=l,k.scope.sidePanelContainerWidth=null,k.scope.sidePanelContainerRight=null,k.scope.sidePanelButtonRight=null;var P=angular.element(t);k.scope.getWindowDimensions=function(){return{height:t.innerHeight,width:t.innerWidth}},k.scope.$watch(k.scope.getWindowDimensions,function(e,t){k.scope.windowHeight=e.height,k.scope.windowWidth=e.width;var i=k.scope.getElementFromClass(k.scope.itSidePanelElement,$);if(k.scope.itHeightMode===d){var n=i[0].getBoundingClientRect().top;if(Math.abs(n)<k.scope.windowHeight){var a=k.scope.itSidePanelTopPosition;k.scope.isNoneTopPosition()&&(a=0);var r=k.scope.windowHeight-n-a,o=.1*r,s=k.scope.getElementFromClass(k.scope.itSidePanelElement,E);s.css("height",o+"px");var l=.1*r,c=k.scope.getElementFromClass(k.scope.itSidePanelElement,A);c.css("height",l+"px");var p=k.scope.getElementFromClass(k.scope.itSidePanelElement,x);p.css("height",.8*r+"px")}}if(k.scope.showPanel){var u=k.scope.windowWidth/12*k.scope.itSidePanelcolMd;k.scope.sidePanelContainerWidth=u,i.css("width",u+"px")}else k.scope.modifySidePanelCssProperties()},!0),k.scope.modifySidePanelCssProperties=function(){var e=k.scope.getElementFromClass(k.scope.itSidePanelElement,$),t=k.scope.getElementFromClass(k.scope.itSidePanelElement,y),i=k.scope.windowWidth/12*k.scope.itSidePanelcolMd;k.scope.sidePanelContainerWidth=i,k.scope.sidePanelContainerRight=-k.scope.sidePanelContainerWidth,k.scope.sidePanelButtonRight=k.scope.sidePanelContainerWidth,e.css("width",k.scope.sidePanelContainerWidth+"px"),e.css("right",k.scope.sidePanelContainerRight+"px"),t.css("right",k.scope.sidePanelButtonRight+"px")},P.bind("resize",function(){k.scope.$apply()}),k.scope.toggleSidePanel=function(){k.scope.showPanel=k.scope.showPanel?!1:!0;var e=k.scope.getElementFromClass(k.scope.itSidePanelElement,$),t=k.scope.getElementFromClass(k.scope.itSidePanelElement,w);if(k.scope.showPanel)t.css("right",""),n(function(){k.scope.sidePanelContainerRight=0,e.css("right",k.scope.sidePanelContainerRight+"px")},50);else{var i=e.css("width");k.scope.sidePanelContainerRight=-parseInt(i.slice(0,i.length-2)),k.scope.sidePanelButtonRight=k.scope.sidePanelContainerWidth,e.css("right",k.scope.sidePanelContainerRight+"px"),t.css("right",k.scope.sidePanelButtonRight+"px")}},k.scope.setItSidePanelElement=function(e){k.scope.itSidePanelElement=e},k.scope.setHeightMode=function(e){if(k.scope.itHeightMode=e.itHeightMode,""===k.scope.itHeightMode||"undefined"==typeof k.scope.itHeightMode)k.scope.itHeightMode=f;else if(-1!=g.indexOf(k.scope.itHeightMode)){var t=g.indexOf(k.scope.itHeightMode);k.scope.itHeightMode=g[t]}else k.scope.itHeightMode=f,a.error('"'+o+'" with value "'+k.scope.itHeightMode+'"is unknown. The default value is taken : "'+f+'"');var i=k.scope.getElementFromClass(k.scope.itSidePanelElement,E);i.css("height","10%");var n=k.scope.getElementFromClass(k.scope.itSidePanelElement,A);n.css("height","10%");var r=k.scope.getElementFromClass(k.scope.itSidePanelElement,x);switch(r.css("height","80%"),k.scope.itHeightMode){case p:var s=k.scope.getElementFromClass(k.scope.itSidePanelElement,$),l=s.css("height");if(l>k.scope.windowHeight){s.css("height","100%");var c=k.scope.getElementFromClass(k.scope.itSidePanelElement,I);c.css("height","100%")}break;case u:break;case d:var c=k.scope.getElementFromClass(k.scope.itSidePanelElement,I);c.css("height","100%");var r=k.scope.getElementFromClass(k.scope.itSidePanelElement,x);r.css("overflow","auto");break;default:a.error('Height mode : "'+k.scope.itHeightMode+'" is unknown.')}},k.scope.setIconClass=function(e,t){var i=C;""===t.itIconClass||"undefined"==typeof t.itIconClass?k.scope.itIconClass=i:k.scope.itIconClass=t.itIconClass},k.scope.setColMd=function(e){isNaN(parseInt(e.itCol))?(k.scope.itSidePanelcolMd=m,a.warn('Attribute "'+r+'" of itSidePanel directive is not a number. The default value is taken : "'+k.scope.itSidePanelcolMd+'"')):e.itCol>h?(k.scope.itSidePanelcolMd=h,a.warn('Attribute "'+r+'" of itSidePanel directive exceeds the maximum value ('+h+"). The maximum value is taken.")):e.itCol<v?(k.scope.itSidePanelcolMd=v,a.warn('Attribute "'+r+'" of itSidePanel directive exceeds the minimum value ('+v+"). The minimum value is taken.")):k.scope.itSidePanelcolMd=e.itCol},k.scope.setZIndexes=function(e,t){var i=null;isNaN(parseInt(t.itZIndex))||(i=parseInt(t.itZIndex));var n=k.scope.getElementFromClass(e,$),a=k.scope.getElementFromClass(e,w);if(null!==i)n.css(c,i),a.css(c,i+1);else{var r=k.scope.findHighestZIndex(),o=r+100;n.css(c,o),a.css(c,o+1)}},k.scope.getElementFromClass=function(e,t){var i=angular.element(e[0].querySelector(t)),n=angular.element(i[0]);return n},k.scope.findHighestZIndex=function(){for(var e=document.getElementsByTagName("*"),i=0,n=0;n<e.length-1;n++){var a=t.getComputedStyle(e[n]),r=parseInt(a["z-index"]);(isNaN(r)?0:r)>i&&(i=r)}return i},k.scope.setTopPosition=function(e){var t=e.itTopPosition;if(isNaN(parseInt(t)))k.scope.isNoneTopPosition()&&"undefined"!=typeof t||(k.scope.itSidePanelTopPosition=S,a.warn('Attribute "'+s+'" of itSidePanel directive is not a number. The mode taken is "'+S+'"'));else{k.scope.itSidePanelTopPosition=e.itTopPosition;var i=k.scope.getElementFromClass(k.scope.itSidePanelElement,$);i.css("top",k.scope.itSidePanelTopPosition+"px")}},k.scope.isNoneTopPosition=function(){return"none"===k.scope.itSidePanelTopPosition}}]),e.directive("itSidePanelFooter",function(){function e(e){}return{scope:!1,link:e,restrict:"E",transclude:!0,require:"^itSidePanel",template:'<div class="it-side-panel-footer" ng-transclude></div>'}}),e.directive("itSidePanelHeader",function(){function e(e){}return{scope:!1,link:e,restrict:"E",transclude:!0,require:"^itSidePanel",template:'<div class="it-side-panel-header text-center" ng-transclude></div>'}}),e.directive("itCollapsedItem",function(){return{restrict:"A",link:function(e,t,i){var n=angular.element(t[0].querySelector("ul")),a=angular.element(t[0].querySelector("a"));n.addClass("it-side-menu-collapse"),t.addClass("it-sub-menu");var r=angular.element(t[0].querySelector("h5")),o=angular.element('<i class="pull-right fa fa-angle-right" ></i>');r.append(o),a.on("click",function(){n.hasClass("it-side-menu-collapse")?(n.removeClass("it-side-menu-collapse"),n.addClass("it-side-menu-expanded"),o.removeClass("fa-angle-right"),o.addClass("fa-angle-down"),t.addClass("toggled")):(t.removeClass("toggled"),o.addClass("fa-angle-right"),o.removeClass("fa-angle-down"),n.removeClass("it-side-menu-expanded"),n.addClass("it-side-menu-collapse"))})}}}),e.directive("itNavActive",["$location",function(e){return{restrict:"A",scope:!1,link:function(t,i,n){function a(){var t=e.path();t&&angular.forEach(i.find("li"),function(e){var i=e.querySelector("a");i.href.match("#"+t+"(?=\\?|$)")?angular.element(e).addClass(r):angular.element(e).removeClass(r)})}var r=n.itActive||"active";a(),t.$on("$locationChangeSuccess",a)}}}]),e.directive("itSideMenu",function(){return{restrict:"E",require:"^itSideMenus",transclude:!0,scope:!0,template:'<div class="it-side-menu it-side-menu-left it-side-menu-hide it-menu-animated" ng-class="{\'it-side-menu-hide\':!showmenu,\'it-side-menu-slide\':showmenu}"><div class="it-sidebar-inner"><div class="nav navbar navbar-inverse"><nav class="" ng-transclude ></nav></div></div></div>'}}),e.directive("itSideMenuContent",function(){return{restrict:"ECA",require:"^itSideMenus",transclude:!0,scope:!0,template:'<div class="it-menu-content" ng-class="{\'it-side-menu-overlay\':showmenu}"><div class="it-container it-fill" ng-transclude></div></div>'}}),e.controller("$sideMenuCtrl",["$scope","$document","$timeout","$window",function(e,t,i,n){var a=this;a.scope=e,a.scope.showmenu=!1,a.toggleMenu=function(){a.scope.showmenu=a.scope.showmenu?!1:!0,i(function(){var e=document.createEvent("Event");e.initEvent("resize",!0,!0),n.dispatchEvent(e)},300)},a.hideSideMenu=function(){a.scope.showmenu=!1}}]),e.directive("itSideMenuHeader",["$rootScope",function(e){return{restrict:"E",require:"^itSideMenus",transclude:!0,scope:!0,link:function(t,i,n,a){var r=angular.element(i[0].querySelector(".it-material-design-hamburger__layer"));angular.element(i[0].querySelector(".it-material-design-hamburger__icon"));t.toggleMenu=a.toggleMenu,"true"===n.itAnimate&&t.$watch("showmenu",function(t,i){t!=i&&(t?(r.removeClass("it-material-design-hamburger__icon--from-arrow"),r.addClass("it-material-design-hamburger__icon--to-arrow"),e.$broadcast("it-sidemenu-state","closed")):(r.removeClass("it-material-design-hamburger__icon--to-arrow"),r.addClass("it-material-design-hamburger__icon--from-arrow"),e.$broadcast("it-sidemenu-state","opened")))},!0),n.itHideButtonMenu&&(t.itHideButtonMenu=t.$eval(n.itHideButtonMenu)),t.$watch(n.itHideButtonMenu,function(e,i){t.itHideButtonMenu=e,e&&a.hideSideMenu()})},template:'<nav id="header" class="it-side-menu-header nav navbar navbar-fixed-top navbar-inverse"><section class="it-material-design-hamburger" ng-hide="itHideButtonMenu"><button  ng-click="toggleMenu()" class="it-material-design-hamburger__icon"><span class="it-menu-animated it-material-design-hamburger__layer"> </span></button> </section><div class="container-fluid" ng-transclude></div></nav>'}}]),e.directive("itSideMenus",function(){return{restrict:"ECA",transclude:!0,controller:"$sideMenuCtrl",template:'<div class="it-side-menu-group" ng-transclude></div>'}}),e.directive("itFillHeight",["$window","$document",function(e,t){return{restrict:"A",scope:{footerElementId:"@",additionalPadding:"@"},link:function(i,n,a){function r(){var a,r=angular.element(t[0].getElementById(i.footerElementId));a=1===r.length?r[0].offsetHeight+o(r)+s(r):0;var l=n[0].offsetTop,c=s(n),d=i.additionalPadding||0,p=e.innerHeight-l-c-a-d;n.css("height",p+"px")}function o(e){var t=l(e,"margin-top"),i=l(e,"border-top-width");return t+i}function s(e){var t=l(e,"margin-bottom"),i=l(e,"border-bottom-width");return t+i}function l(e,t){return parseInt(e.css(t),10)||0}angular.element(e).on("resize",r),r()}}}]),e.directive("itViewMasterHeader",function(){return{restrict:"E",transclude:!0,scope:!0,template:'<div class="row"><div class="col-md-6"><div class="btn-toolbar" ng-transclude></div></div><div class="col-md-6 pull-right"><div><form><div class="form-group has-feedback"><span class="glyphicon glyphicon-search form-control-feedback"></span><input it-input class="form-control" type="text" placeholder="Rechercher"/></div></form></div></div></div>'}}),e.directive("itViewPanel",function(){return{restrict:"E",transclude:!0,scope:!0,template:'<div class="jumbotron" ng-transclude></div>'}}),e.directive("itViewTitle",function(){return{restrict:"E",transclude:!0,scope:!0,template:'<div class="row"><div class="col-xs-12"><h3 ng-transclude></h3><hr></div></div>'}}),e.filter("itUnicode",["$sce",function(e){return function(t){function i(e){for(var t="",i=0;i<e.length;i++){for(var n=e.charCodeAt(i).toString(16).toUpperCase();n.length<4;)n="0"+n;n="&#x"+n+";",t+=n}return t}return e.trustAsHtml(i(t))}}]),e.factory("itAmountCleanerService",[function(){var e=["en_US","en_GB","fr_FR","de_DE","id_IT"];return{cleanAmount:function(t,i){var n=0,a=!1;return e.forEach(function(e){JSON.stringify(e)==JSON.stringify(i)&&(a=!0)}),0==a?(console.log("Unable to format amount for local "+i),""):(t=t.replace(/[^0-9,.]/g,""),(JSON.stringify(i)==JSON.stringify(e[2])||JSON.stringify(i)==JSON.stringify(e[4]))&&(t=t.replace(",",".")),JSON.stringify(i)==JSON.stringify(e[0])?t=t.replace(",",""):JSON.stringify(i)==JSON.stringify(e[3])&&(t=t.replace(".",""),t=t.replace(",",".")),n=parseFloat(t),console.log("result1 "+n),void 0==n&&(n=parseFloat(t)),console.log("result2 "+n),n)},formatAmount:function(t,i){var n="",a=!1;if(e.forEach(function(e){JSON.stringify(e)==JSON.stringify(i)&&(a=!0)}),0==a)return console.log("Unable to format amount for local "+i),"";if(void 0!=t){var r=t.toString();r=r.replace(/[^0-9,.]/g,""),(JSON.stringify(i)==JSON.stringify(e[2])||JSON.stringify(i)==JSON.stringify(e[4]))&&(r=r.replace(",","."))}return n=new Intl.NumberFormat(i.replace("_","-"),{minimumFractionDigits:2,maximumFractionDigits:2}).format(parseFloat(r))}}}]),e.factory("itPaginatorConfigService",["$q","$log","itNotifier","$filter","MetadataService",function(e,t,i,n,a){function r(){if(o.fields.loaded)t.debug("PaginatorConfigService: loaded"),s.resolve("ok");else{var r=a.getConfig.get({type:"paginatorOptions"}).$promise,l=a.getConfig.get({type:"paginatorDefaultOption"}).$promise;e.all([r,l]).then(function(e){o.fields.defaultOption=e[1].value;var a=e[0].value;angular.isDefined(a)&&null!=a&&angular.isDefined(a.split)?o.fields.options=a.split(","):i.notifyError({content:n("translate")("ERROR.WS.METADATA_ERROR")},a),t.debug("PaginatorConfigService: loaded"),o.fields.loaded=!0,s.resolve("ok")},function(e){i.notifyError({content:n("translate")("ERROR.WS.METADATA_ERROR")},e.data)})}return s.promise}var o=this,s=e.defer();return o.fields={options:[],defaultOption:"",loaded:!1},o.fn={initialize:r},o}]),e.factory("itQueryParamFactory",[function(){function e(e,t,i){this.key=e,this.value=t,this.operator=i}return{create:function(t,i,n){return new e(t,i,n)}}}]),e.factory("itQueryFactory",["OPERATOR",function(e){function t(t,i,n,a){this.parameters=t,this.start=i,this.size=n,this.sort=a,this.build=function(){var r="";return void 0!=t&&this.parameters.forEach(function(t){angular.isDefined(t.value)&&angular.isDefined(t.key)&&(t.value instanceof Date&&t.operator==e.LESS_EQUALS&&(t.value.setHours(23),t.value.setMinutes(59),t.value.setSeconds(59),t.value.setMilliseconds(999)),r.length>0&&(r+=" and "),t.value instanceof Date&&(t.value=t.value.toISOString()),t.operator==e.LIKE&&(t.value=t.value+"%"),r+=t.key+t.operator+t.value)}),r="query="+r,null!=n&&angular.isDefined(n)&&""!=n&&(r+="&size="+this.size),null!=i&&angular.isDefined(i)&&""!=i&&(r+="&start="+this.start),void 0!=a&&void 0!=this.sort.name&&(r+="&sort=","desc"==this.sort.direction&&(r+="-"),r+=this.sort.name),r}}return{create:function(e,i,n,a){return new t(e,i,n,a)}}}]),e.provider("itNotifier",[function(){var e=this;e.defaultOptions={dismissOnTimeout:!0,timeout:4e3,dismissButton:!0,animation:"fade",horizontalPosition:"right",verticalPosition:"bottom",compileContent:!0,dismissOnClick:!1,success:{dismissOnClick:!0},info:{dismissOnClick:!0},error:{dismissOnTimeout:!1},warning:{dismissOnTimeout:!1}},this.$get=["ngToast","$rootScope","$log",function(t,i,n){function a(e){return" CODE : "+e.CODE+", TYPE : "+e.TYPE+", MESSAGE : "+e.MESSAGE+", DETAIL : "+e.DETAIL+", DONE : "+e.DONE}var r={};return t.settings=angular.extend(t.settings,e.defaultOptions),r.notifySuccess=function(i,r){var o=angular.extend(t.settings,e.defaultOptions,e.defaultOptions.success,i,i.success);t.success(o),void 0!=r&&n.log("Success popup called : "+a(r))},r.notifyError=function(i,r){var o=angular.extend(t.settings,e.defaultOptions,e.defaultOptions.error,i,i.error);t.danger(o),void 0!=r&&n.error("Error popup called : "+a(r))},r.notifyInfo=function(i,r){var o=angular.extend(t.settings,e.defaultOptions,e.defaultOptions.info,i,i.info);t.info(o),void 0!=r&&n.info("Info popup called : "+a(r))},r.notifyWarning=function(i,r){var o=angular.extend(t.settings,e.defaultOptions,e.defaultOptions.warning,i,i.warning);t.warning(o),void 0!=r&&n.warn("Warning popup called : "+a(r))},r.notifyDismiss=function(e,i){t.dismiss()},r.notify=function(e){n.error("Unknown type for itNotifier: "+e)},i.$on("$locationChangeSuccess",function(){r.notifyDismiss()}),i.$on("itNotifierEvent",function(e,t){if(t)switch(t.type){case"SUCCESS":r.notifySuccess(t.options,t.errorDetails);break;case"ERROR":r.notifyError(t.options,t.errorDetails);break;case"INFO":r.notifyInfo(t.options,t.errorDetails);break;case"WARNING":r.notifyWarning(t.options,t.errorDetails);break;case"DISMISS":r.notifyDismiss(t.options,t.errorDetails);break;default:r.notify(t.type)}else n.error("Bad usage of itNotifier. Check manual for details")}),r}]}]),e.factory("itPopup",["$uibModal","$uibModalStack","$rootScope","$q","$compile",function(e,t,i,n,a){function r(e){function t(){return!1}var a={};return a.scope=(e.scope||i).$new(),a.responseDeferred=n.defer(),a.scope.$buttonTapped=function(e,t){var i=(t.onTap||noop)(e);a.responseDeferred.resolve(i)},e=angular.extend({scope:a.scope,template:p,controller:["$scope","$modalInstance",function(e,i){function n(){i.close(e.data)}function r(){i.dismiss("cancel")}e.itButtonAction=function(i,o){var s=(o.onTap||t)(i,e),l=s;i.isDefaultPrevented()||a.responseDeferred.resolve(l?n():r())}}],buttons:[]},e||{}),e.scope.options=e,a.options=e,a}function o(i){t.dismissAll();var n=r(i);return e.open(n.options).result}function s(e){return t.dismissAll(),o(angular.extend({buttons:[{text:e.okText||"OK",type:e.okType||"btn-info",onTap:function(){return!0}}]},e||{}))}function l(e){return t.dismissAll(),o(angular.extend({buttons:[{text:e.okText||"OK",type:e.okType||"btn-info",onTap:function(){return!0}},{text:e.cancelText||"Cancel",type:e.cancelType||"",onTap:function(){return!1}}]},e||{}))}function c(e){return t.dismissAll(),o(e)}function d(e){t.dismissAll();var n=i.$new(!0);n.data={};var a="";return e.template&&/<[a-z][\s\S]*>/i.test(e.template)===!1&&(a="<span>"+e.template+"</span>",delete e.template),o(angular.extend({template:u,inputLabel:e.inputLabel||"",buttons:[{text:e.okText||"OK",type:e.okType||"btn-info",onTap:function(){return!0}},{text:e.cancelText||"Cancel",type:e.cancelType||"",onTap:function(){}}]},e||{}))}var p='<div class="modal-header it-view-header"><h3 it-compile="options.title"></h3></div><div class="modal-body"><p it-compile="options.text"></p></div><div class="modal-footer"><button ng-repeat="button in options.buttons" class="btn btn-raised {{button.type}}" ng-click="itButtonAction($event,button)" it-compile="button.text"></button></div>',u='<div class="modal-header it-view-header"><h3 it-compile="options.title"></h3></div></div><div class="modal-body"><p it-compile="options.text"></p>   <div class="form-group"><div class="form-control-wrapper"><input type="{{options.inputType}}" class="form-control" ng-model="data.response"  placeholder="{{options.inputPlaceholder}}"></div></div></div><div class="modal-footer"><button ng-repeat="button in options.buttons" class="btn btn-raised {{button.type}}" ng-click="itButtonAction($event,button)" it-compile="button.text"></button></div>',g={alert:s,confirm:l,prompt:d,custom:c};return g}])}();